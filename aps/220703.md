# 220703



## Baekjoon #17070 파이프 옮기기 1 #



### 전략

1. 파이프의 방향이 각각 가로, 대각선, 세로일 때 (r, c) 위치에 도달할 수 있는 경우의 수가 담긴 배열 3개를 만든다.
2. 파이프가 시작하는 순간은 위 배열에 기록한다.
3. 파이프가 이동할 수 있는 범위만 완전 탐색한다.



### Code

```python
N = int(input())
arr = [list(map(int, input().split())) for _ in range(N)]

# 0으로 초기화 상태인 N*N 배열 3개를 만든다.
# 파이프가 가로로 놓인 상태에서 파이프의 끝부분이 (r, c) 위치에 놓일 수 있는 경우의 수가 담긴 배열, dp[0][r][c]
# 파이프가 대각선으로 놓인 상태에서 파이프의 끝부분이 (r, c) 위치에 놓일 수 있는 경우의 수가 담긴 배열, dp[1][r][c]
# 파이프가 세로로 놓인 상태에서 파이프의 끝부분이 (r, c) 위치에 놓일 수 있는 경우의 수가 담긴 배열, dp[2][r][c]
dp = [[[0] * N for _ in range(N)] for _ in range(3)]

# 파이프는 항상 가로로 놓인 상태에서 끝부분은 (0, 1)에서 시작한다.
dp[0][0][1] = 1

# 파이프 이동 방향 특성상 (r, 0)과 (r, 1)은 절대 도달할 수 없으므로 이를 제외하고 완전 탐색
for r in range(0, N):
    for c in range(2, N):

        # 파이프가 대각선 방향 (r, c)로 이동하려면 (r, c), (r-1, c), (r, c-1)은 비어 있어야 한다.
        if not(arr[r][c] or arr[r-1][c] or arr[r][c-1]):
            dp[1][r][c] = dp[0][r-1][c-1] + dp[1][r-1][c-1] + dp[2][r-1][c-1]

        # 파이프가 가로, 세로 방향 (r, c)로 이동하려면 (r, c)만 비어 있으면 된다.
        if arr[r][c] != 1:
            dp[0][r][c] = dp[0][r][c-1] + dp[1][r][c-1]
            dp[2][r][c] = dp[2][r-1][c] + dp[1][r-1][c]

result = 0
for j in range(3):
    result += dp[j][N-1][N-1]

print(result)
```

